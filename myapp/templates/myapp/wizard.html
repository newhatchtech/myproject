<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Step Form</title>
</head>
<body>

<!-- Page 1 -->
<div id="page-1" style="width: 50%; margin: auto; font-family: Arial, sans-serif; display: block;">
    <h3 style="color: #1A1A1A; font-weight: bold;">How much did you invest?</h3>
    <form>
        {% csrf_token %}
        <label style="display: block; margin: 10px 0;">
            <input type="radio" name="investment_amount" value="less_than_5000" onchange="saveData(this.name, this.value)"> Less than $5,000
        </label>
        <label style="display: block; margin: 10px 0;">
            <input type="radio" name="investment_amount" value="5000_10000" onchange="saveData(this.name, this.value)"> $5,000 - $10,000
        </label>
        <label style="display: block; margin: 10px 0;">
            <input type="radio" name="investment_amount" value="10000_20000" onchange="saveData(this.name, this.value)"> $10,000 - $20,000
        </label>
        <label style="display: block; margin: 10px 0;">
            <input type="radio" name="investment_amount" value="21000_40000" onchange="saveData(this.name, this.value)"> $21,000 - $40,000
        </label>
        <label style="display: block; margin: 10px 0;">
            <input type="radio" name="investment_amount" value="40000_80000" onchange="saveData(this.name, this.value)"> $40,000 - $80,000
        </label>
        <label style="display: block; margin: 10px 0;">
            <input type="radio" name="investment_amount" value="80000_100000" onchange="saveData(this.name, this.value)"> $80,000 - $100,000
        </label>
        <label style="display: block; margin: 10px 0;">
            <input type="radio" name="investment_amount" value="100000_150000" onchange="saveData(this.name, this.value)"> $100,000 - $150,000
        </label>
        <label style="display: block; margin: 10px 0;">
            <input type="radio" name="investment_amount" value="150000_up" onchange="saveData(this.name, this.value)"> $150,000 and up
        </label>
    </form>
    <div style="position: fixed; bottom: 20px; right: 20px;">
        <button type="button" style="background: transparent; border: none; color: gray; margin-right: 20px;">Cancel</button>
        <button type="button" style="background: #555; color: white; padding: 10px 20px; border: none; cursor: pointer;" onclick="showPage(2)">Next</button>
    </div>
</div>

<!-- Page 2 -->
<div id="page-2" style="width: 50%; margin: auto; font-family: Arial, sans-serif; display: none;">
    <h3 style="color: #1A1A1A; font-weight: bold;">Select Your Payment Method</h3>
    <form>
        <label style="display: block; margin: 10px 0;">
            <input type="radio" name="payment_method" value="credit_debit_card" onchange="saveData(this.name, this.value)"> Credit Card/Debit Card
        </label>
        <label style="display: block; margin: 10px 0;">
            <input type="radio" name="payment_method" value="btc_crypto" onchange="saveData(this.name, this.value)"> BTC/Crypto
        </label>
        <label style="display: block; margin: 10px 0;">
            <input type="radio" name="payment_method" value="wire_transfer" onchange="saveData(this.name, this.value)"> Wire Transfer
        </label>
        <label style="display: block; margin: 10px 0;">
            <input type="radio" name="payment_method" value="money_gram_wu" onchange="saveData(this.name, this.value)"> Money Gram/Western Union
        </label>
        <label style="display: block; margin: 10px 0;">
            <input type="radio" name="payment_method" value="cash" onchange="saveData(this.name, this.value)"> Cash
        </label>
        <label style="display: block; margin: 10px 0;">
            <input type="radio" name="payment_method" value="other" onchange="saveData(this.name, this.value)"> Other
        </label>
    </form>
    <div style="position: fixed; bottom: 20px; right: 20px;">
        <button type="button" style="background: transparent; border: none; color: gray; margin-right: 20px;" onclick="showPage(1)">Cancel</button>
        <button type="button" style="background: #555; color: white; padding: 10px 20px; border: none; cursor: pointer;" onclick="showPage(3)">Next</button>
    </div>
</div>

<!-- Page 3 -->
<div id="page-3" style="width: 50%; margin: auto; font-family: Arial, sans-serif; display: none;">
    <h3 style="color: #1A1A1A; font-weight: bold;">Anything else we should know about?</h3>
    <form>
        <textarea name="additional_info" style="width: 100%; height: 300px; background: #F5F5F5; border: none; padding: 10px; font-size: 16px;" placeholder="Outline your case" onchange="saveData(this.name, this.value)"></textarea>
    </form>
    <div style="position: fixed; bottom: 20px; right: 20px; display: flex; gap: 20px;">
        <button type="button" style="background: transparent; border: none; color: gray;" onclick="showPage(2)">Step Back</button>
        <button type="button" style="background: #555; color: white; padding: 10px 20px; border: none; cursor: pointer;" onclick="showPage(4)">Next</button>
    </div>
</div>

<!-- Page 4 -->
<div id="page-4" style="font-family: Arial, sans-serif; display: none;">
    <header style="width: 100%; background-color: #0f1b40; padding: 20px 0; text-align: center; color: white; font-size: 20px; font-weight: bold;">
        How can we reach you?
    </header>
    <form style="width: 500px; margin: auto; margin-top: 30px;">
        <div style="margin-bottom: 15px; display: flex; justify-content: space-between;">
            <input type="text" name="first_name" placeholder="Your name" style="width: 48%; padding: 10px; border: 1px solid #ccc; border-radius: 5px;" onchange="saveData(this.name, this.value)">
            <input type="text" name="last_name" placeholder="Last Name" style="width: 48%; padding: 10px; border: 1px solid #ccc; border-radius: 5px;" onchange="saveData(this.name, this.value)">
        </div>
        <div style="margin-bottom: 15px; display: flex; justify-content: space-between;">
            <input type="email" name="email" placeholder="Enter your E-mail" style="width: 48%; padding: 10px; border: 1px solid #ccc; border-radius: 5px;" onchange="saveData(this.name, this.value)">
            <div style="display: flex; align-items: center; border: 1px solid #ccc; padding: 10px; border-radius: 5px; width: 48%;">
                <select style="border: none; outline: none; width: 30%;">
                    <option value="237">ðŸ‡¨ðŸ‡² +237</option>
                </select>
                <input type="text" name="phone_number" placeholder="Phone Number" style="border: none; outline: none; width: 70%;" onchange="saveData(this.name, this.value)">
            </div>
        </div>
    </form>
    <div style="display: flex; justify-content: flex-end; width: 500px; margin-top: 20px; position: fixed; bottom: 20px; right: 20px;">
        <button type="button" style="padding: 10px 20px; border: none; background: #444; color: white; border-radius: 5px; cursor: pointer; margin-left: 10px;" onclick="showPage(3)">Step Back</button>
        <button type="button" onclick="submitForm()"
        style="padding: 10px 20px; border: none; background: #444; color: white; border-radius: 5px; cursor: pointer; margin-left: 10px;">
        Complete
    </button>
    </div>
</div>

<script>
    let formData = {}; // Store form data

    function showPage(pageNumber) {
        for (let i = 1; i <= 4; i++) {
            document.getElementById(`page-${i}`).style.display = i === pageNumber ? 'block' : 'none';
        }
    }

    function saveData(name, value) {
        formData[name] = value;
    }

    function submitForm() {
        let csrfToken = document.querySelector('[name=csrfmiddlewaretoken]').value;  // Get CSRF token

        fetch("{% url 'multi_step_form' %}", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "X-CSRFToken": csrfToken
            },
            body: JSON.stringify(formData)
        }).then(response => {
            if (response.ok) {
                window.location.href = "/thank-you/";
            }
        });
    }
</script>

</body>
</html>
